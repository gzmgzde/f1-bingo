<!DOCTYPE html>
<html lang="en">

<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>F1 Qatar GP Bingo</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background: #111;
Â  Â  Â  color: #fff;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 20px;
Â  Â  }
Â  Â  h1 {
Â  Â  Â  color: #ff4d4d;
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 10px;
Â  Â  }
Â  Â  #board {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(3, 120px);
Â  Â  Â  grid-template-rows: repeat(3, 120px);
Â  Â  Â  gap: 10px;
Â  Â  Â  margin-top: 20px;
Â  Â  }
Â  Â  .cell {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  padding: 10px;
Â  Â  Â  background: #222;
Â  Â  Â  border: 1px solid #444;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  text-align: center;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: 0.2s;
Â  Â  Â  font-size: 14px;
Â  Â  }
Â  Â  .cell:hover { background: #333; }
Â  Â  .marked {
Â  Â  Â  background: #ff4d4d;
Â  Â  Â  color: #000;
Â  Â  Â  font-weight: bold;
Â  Â  }
Â  Â  button {
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  background: #ff4d4d;
Â  Â  Â  color: #000;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: bold;
Â  Â  }
Â  Â  #usernameInput {
Â  Â  Â  padding: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  border: 1px solid #444;
Â  Â  Â  margin-bottom: 10px;
Â  Â  }
Â  </style>
</head>
<body>
Â  <h1>F1 Qatar GP Bingo</h1>
Â  <input id="usernameInput" type="text" placeholder="Enter your username" />
Â  <p>Tap squares to mark them. 3 in a row wins!</p>

Â  <div id="board"></div>
Â  <h2>Leaderboard</h2>
<ul id="leaderboard"></ul>
Â  <button onclick="resetMarks()">Reset Marks</button>
Â 
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
Â 
<script>
Â  Â  const items = [
Â  Â  Â  "Safety Car", "Virtual Safety Car", "DRS train", "Track limits violation",
Â  Â  Â  "Time penalty", "Tyre complaint", "Pit stop <2.5s", "Pit stop >5s",
Â  Â  Â  "Runs wide Turn 1", "Team orders", "Driver retires (DNF)", "Max fastest lap",
Â  Â  Â  "Lando radio complaint", "Russell/Leclerc blame", "Checo penalty",
Â  Â  Â  "Lewis coaching moment", "Oscar quiet radio", "Tyre blistering",
Â  Â  Â  "Undercut attempt", "Switch to hards", "Fans on camera",
Â  Â  Â  "Kids with earmuffs", "Partner on camera", "Team banner",
Â  Â  Â  "Yellow flag", "Lock-up", "Helmet cam", "Slow pit exit",
Â  Â  Â  "Pit lane traffic", "Wheel-to-wheel fight"
Â  Â  ];

Â  Â  let boardCells = [];
    
    // --- Firebase Configuration and Initialization ---
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyA0lUuOnAq8N4sn6WpPr5evS3-sYwXfyu4",
Â  Â  Â  authDomain: "f1-bingo-7c7d4.firebaseapp.com",
Â  Â  Â  databaseURL: "https://f1-bingo-7c7d4.firebaseio.com",
Â  Â  Â  projectId: "f1-bingo-7c7d4",
Â  Â  Â  storageBucket: "f1-bingo-7c7d4.appspot.com",
Â  Â  Â  messagingSenderId: "167693372774",
Â  Â  Â  appId: "1:167693372774:web:11afc0fd34166a437d8ca7"
Â  Â  };

Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  const db = firebase.database();
    // ----------------------------------------------------

Â  Â  function shuffle(arr) {
Â  Â  Â  return arr.sort(() => Math.random() - 0.5);
Â  Â  }

Â  Â  // Generate the board once at page load
Â  Â  function generateBoard() {
Â  Â  Â  const board = document.getElementById("board");
Â  Â  Â  board.innerHTML = "";
Â  Â  Â  boardCells = [];

Â  Â  Â  const card = shuffle([...items]).slice(0, 9);

Â  Â  Â  card.forEach((text, index) => {
Â  Â  Â  Â  const cell = document.createElement("div");
Â  Â  Â  Â  cell.className = "cell";
Â  Â  Â  Â  cell.textContent = text;
Â  Â  Â  Â  cell.dataset.index = index;
Â  Â  Â  Â  cell.onclick = () => toggleMark(cell);
Â  Â  Â  Â  board.appendChild(cell);
Â  Â  Â  Â  boardCells.push(cell);
Â  Â  Â  });
Â  Â  }

Â  Â  function toggleMark(cell) {
Â  Â  Â  const username = document.getElementById('usernameInput').value.trim();
Â  Â  Â  if (!username) {
Â  Â  Â  Â  alert('Please enter a username!');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  cell.classList.toggle("marked");
Â  Â  Â  checkWinner(username);
Â  Â  }

Â  Â  function checkWinner(username) {
Â  Â  Â  const winCombos = [
Â  Â  Â  Â  [0,1,2], [3,4,5], [6,7,8], // rows
Â  Â  Â  Â  [0,3,6], [1,4,7], [2,5,8], // columns
Â  Â  Â  Â  [0,4,8], [2,4,6] // diagonals
Â  Â  Â  ];

Â  Â  Â  for (const combo of winCombos) {
Â  Â  Â  Â  if (combo.every(i => boardCells[i].classList.contains('marked'))) {
Â  Â  Â  Â  Â  alert(username + ' wins! ðŸŽ‰');
Â  Â  Â  Â  Â  saveResult(username);
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }

Â  Â  function resetMarks() {
Â  Â  Â  boardCells.forEach(cell => cell.classList.remove('marked'));
Â  Â  }

Â  Â  function saveResult(username) {
Â  Â  Â  const winnersRef = db.ref('winners');
Â  Â  Â  winnersRef.push({
Â  Â  Â  Â  username: username,
Â  Â  Â  Â  timestamp: Date.now()
Â  Â  Â  });
Â  Â  }

Â  Â  // Initialize board on page load
Â  Â  generateBoard();

Â  Â  // Leaderboard Listener
Â  Â  const leaderboard = document.getElementById('leaderboard');

Â  Â  db.ref('winners').on('value', snapshot => {
Â  Â  Â  leaderboard.innerHTML = '';
Â  Â  Â  const winnersArray = [];
Â  Â  Â  snapshot.forEach(child => {
Â  Â  Â  Â  winnersArray.push(child.val());
Â  Â  Â  });
Â  Â  Â  // Sort by timestamp (earliest first)
Â  Â  Â  winnersArray.sort((a, b) => a.timestamp - b.timestamp);
Â  Â  Â  winnersArray.forEach((winner, index) => {
Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  li.textContent = `${index + 1}. ${winner.username}`;
Â  Â  Â  Â  leaderboard.appendChild(li);
Â  Â  Â  });
Â  Â  });
</script>
</body>
</html>
